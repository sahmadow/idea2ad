{% extends "base.html" %}

{% block styles %}
<style>
.ad-container {
    width: 100%;
    height: 100%;
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: space-between;
    overflow: hidden;
}

/* Background - full bleed */
.background {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 0;
}

.background img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

/* Dark overlay for text readability */
.background-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(
        to bottom,
        rgba(0, 0, 0, 0.3) 0%,
        rgba(0, 0, 0, 0.1) 40%,
        rgba(0, 0, 0, 0.4) 100%
    );
    z-index: 1;
}

/* Fallback solid color background */
.background-fallback {
    width: 100%;
    height: 100%;
    background: {{ background_color or primary_color or '#1a1a2e' }};
}

/* Content wrapper */
.content-wrapper {
    position: relative;
    z-index: 2;
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    padding: 40px;
}

/* Logo */
.logo {
    max-width: 140px;
    max-height: 70px;
    object-fit: contain;
    margin-bottom: auto;
}

/* Main content */
.main-content {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    flex: 1;
    text-align: center;
    padding: 20px 0;
}

/* Headline - exact replica styling */
.headline {
    font-family: '{{ font_family }}', -apple-system, BlinkMacSystemFont, sans-serif;
    font-size: 64px;
    font-weight: 800;
    color: {{ text_color or '#ffffff' }};
    line-height: 1.1;
    letter-spacing: -1px;
    text-shadow: 0 2px 20px rgba(0, 0, 0, 0.4);
    margin-bottom: 20px;
    max-width: 90%;
}

/* Subheadline */
.subheadline {
    font-family: '{{ font_family }}', sans-serif;
    font-size: 28px;
    font-weight: 500;
    color: {{ text_color or '#ffffff' }};
    opacity: 0.9;
    line-height: 1.4;
    max-width: 80%;
    text-shadow: 0 1px 10px rgba(0, 0, 0, 0.3);
}

/* CTA Button - replicated from landing page */
.cta-wrapper {
    margin-top: auto;
    display: flex;
    justify-content: center;
}

.cta-button {
    {% if cta_styles.backgroundColor %}
    background: {{ cta_styles.backgroundColor }};
    {% else %}
    background: {{ accent_color }};
    {% endif %}

    {% if cta_styles.color %}
    color: {{ cta_styles.color }};
    {% else %}
    color: #ffffff;
    {% endif %}

    {% if cta_styles.padding %}
    padding: {{ cta_styles.padding }};
    {% else %}
    padding: 28px 64px;
    {% endif %}

    {% if cta_styles.borderRadius %}
    border-radius: {{ cta_styles.borderRadius }};
    {% else %}
    border-radius: {{ border_radius or '12px' }};
    {% endif %}

    font-family: '{{ font_family }}', sans-serif;

    {% if cta_styles.fontSize %}
    font-size: {{ cta_styles.fontSize }};
    {% else %}
    font-size: 32px;
    {% endif %}

    min-width: 280px;
    text-align: center;

    {% if cta_styles.fontWeight %}
    font-weight: {{ cta_styles.fontWeight }};
    {% else %}
    font-weight: 700;
    {% endif %}

    {% if cta_styles.textTransform %}
    text-transform: {{ cta_styles.textTransform }};
    {% else %}
    text-transform: uppercase;
    {% endif %}

    letter-spacing: 1px;

    {% if cta_styles.boxShadow %}
    box-shadow: {{ cta_styles.boxShadow }};
    {% else %}
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3);
    {% endif %}

    border: none;
    cursor: pointer;
    display: inline-block;
    text-decoration: none;
}
</style>
{% endblock %}

{% block content %}
<div class="ad-container">
    {# Background image or fallback #}
    <div class="background">
        {% if background_url %}
        <img src="{{ background_url }}" alt="">
        {% elif background_screenshot %}
        <img src="data:image/png;base64,{{ background_screenshot }}" alt="">
        {% else %}
        <div class="background-fallback"></div>
        {% endif %}
    </div>
    <div class="background-overlay"></div>

    {# Content #}
    <div class="content-wrapper">
        {# Logo #}
        {% if logo_url %}
        <img class="logo" src="{{ logo_url }}" alt="Logo">
        {% endif %}

        {# Main content #}
        <div class="main-content">
            <h1 class="headline">{{ headline }}</h1>
            {% if subheadline %}
            <p class="subheadline">{{ subheadline }}</p>
            {% endif %}
        </div>

        {# CTA Button #}
        <div class="cta-wrapper">
            <div class="cta-button">{{ cta_text }}</div>
        </div>
    </div>
</div>
{% endblock %}
